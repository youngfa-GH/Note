## 基础架构

### 连接器
管理连接，权限验证  
长连接、短链接
问题：内存占用、异常重启、
解决：1定期断开、2mysql_reset_connection重新初始化连接资源

### 查询缓存（8.0没有该功能）
查询缓存失效、静态表长时间更新一次、
设置参数关闭查询缓存：将参数query_cache_type设置为DEMAND则默认sql语句不使用查询缓存。
可以使用SQL_CACHE显式指定开启：如：  
`mysql> select SQL_CACHE * from T where ID=10;`  
### 分析器
词法分析：  关键字select、表名、列ID识别
语法分析：  判断SQL语句是否符合语法规则  语法错误会提示此一个出现错误的位置 位于报错语句use near后的内容   
分析阶段判断语句是否正确，表是否存在，列是否存在等 
### 优化器  
优化器是在表里面有多个索引的时候，决定使用哪个索引；或者在一个语句有多表关联（join）的时候，决定各个表的连接顺序  
### 执行器  
开始执行的时候，要先判断一下你对这个表T有没有执行查询的权限，如果没有，就会返回没有权限的错误。比如：  
`mysql> select * from T where ID=10;`  
我们这个例子中的表T中，ID字段没有索引，那么执行器的执行流程是这样的：  

1调用InnoDB引擎接口取这个表的第一行，判断ID值是不是10，如果不是则跳过，如果是则将这行存在结果集中；

2调用引擎接口取“下一行”，重复相同的判断逻辑，直到取到这个表的最后一行。

3执行器将上述遍历过程中所有满足条件的行组成的记录集作为结果集返回给客户端。

至此，这个语句就执行完成了。 
我们可以在数据库的慢查询日志中看到一个rows_examined的字段，表示这个语句执行过程中扫描了多少行。这个值就是在执行器每次调用引擎获取数据行的时候累加的。在有些场景下，执行器调用一次，在引擎内部则扫描了多行，因此引擎扫描行数跟rows_examined并不是完全相同的 

